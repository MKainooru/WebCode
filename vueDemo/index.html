<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./css/Element-ui.css" />
    <link rel="stylesheet" type="text/css" href="./css/index.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/element-ui/lib/theme-chalk/index.css"
    />
    <script src="./js/vue.js" type="text/javascript" charset="utf-8"></script>
    <script src="./js/element-ui.js"></script>
    <script src="./js/axios.js"></script>
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>

    <style>
      html,
      body,
      #app {
        height: 100%;
        width: 100%;
      }
      .el-aside {
        background-color: #ffffff;
        color: #333;
        height: 100%;
      }

      .el-main {
        background-color: #e9eef3;
        color: #333;
        text-align: center;
        line-height: 60px;
        height: 100%;
      }

      .el-container {
        background-color: white;
        height: 100%;
      }

      .tac,
      .el-col,
      .el-menu-vertical-demo {
        height: 100%;
      }

      .el-icon-organization {
        background: url(./icon/组织群组.png);
        background-size: contain;
      }
      .el-icon-organization:before {
        content: "organization";
        font-size: 23px;
        visibility: hidden;
      }

      .el-icon-management {
        background: url(./icon/员工管理.png);
        background-size: contain;
      }
      .el-icon-management:before {
        content: "management";
        font-size: 23px;
        visibility: hidden;
      }

      .el-icon-relationship {
        background: url(./icon/关系图.png);
        background-size: contain;
      }
      .el-icon-relationship:before {
        content: "relationship";
        font-size: 23px;
        visibility: hidden;
      }

      .el-icon-report {
        background: url(./icon/分光报表.png);
        background-size: contain;
      }
      .el-icon-report:before {
        content: "report";
        font-size: 23px;
        visibility: hidden;
      }

      .el-icon-announcement {
        background: url(./icon/公告.png);
        background-size: contain;
      }
      .el-icon-announcement:before {
        content: "report";
        font-size: 23px;
        visibility: hidden;
      }

      .typebtn {
        float: right;
        text-align: center;
      }

      .container1 {
        float: left;
        border: 1px solid rgb(189, 178, 178);
        border-radius: 5px;
        display: flex;
        height: 100px;
        width: 64%;
      }
      .container1 div {
        text-align: center;
        line-height: 100px;
      }

      .container2 {
        float: right;
        border: 1px solid rgb(189, 178, 178);
        border-radius: 5px;
        display: flex;
        height: 100px;
        width: 34%;
      }
      .container2 div {
        text-align: center;
        line-height: 100px;
      }
    </style>
  </head>

  <body>
    <div id="app">
      <el-container>
        <el-aside>
          <el-row class="tac">
            <el-col :spen="12">
              <el-menu
                default-active="2"
                class="el-menu-vertical-demo"
                @open="handleOpen"
                @close="handleClose"
              >
                <el-submenu index="1">
                  <template slot="title">
                    <i class="el-icon-organization"></i>
                    <span>组织管理</span>
                  </template>
                  <el-menu-item-group>
                    <el-menu-item index="1-1">部门管理</el-menu-item>
                    <el-menu-item index="1-2">职位管理</el-menu-item>
                  </el-menu-item-group>
                </el-submenu>
                <el-submenu index="2">
                  <template slot="title">
                    <i class="el-icon-management"></i>
                    <span>员工管理</span>
                  </template>
                  <el-menu-item-group>
                    <el-menu-item index="2-1">花名册</el-menu-item>
                    <el-menu-item index="2-2">用工安全</el-menu-item>
                  </el-menu-item-group>
                </el-submenu>
                <el-submenu index="3">
                  <template slot="title">
                    <i class="el-icon-relationship"></i>
                    <span>员工关系</span>
                  </template>
                  <el-menu-item-group>
                    <el-menu-item index="3-1">入职管理</el-menu-item>
                    <el-menu-item index="3-2">转正管理</el-menu-item>
                    <el-menu-item index="3-3">异动管理</el-menu-item>
                    <el-menu-item index="3-4">离职管理</el-menu-item>
                    <el-menu-item index="3-6">员工关怀</el-menu-item>
                  </el-menu-item-group>
                  <el-submenu index="3-5">
                    <template slot="title">合同管理</template>
                    <el-menu-item index="3-5-1">选项1</el-menu-item>
                  </el-submenu>
                </el-submenu>
                <el-submenu index="4">
                  <template slot="title">
                    <i class="el-icon-report"></i>
                    <span>报表</span>
                  </template>
                  <el-menu-item-group>
                    <el-menu-item index="4-1">人事报表</el-menu-item>
                  </el-menu-item-group>
                </el-submenu>
                <el-submenu index="5">
                  <template slot="title">
                    <i class="el-icon-setting"></i>
                    <span>设置</span>
                  </template>
                  <el-menu-item-group>
                    <el-menu-item index="5-1">权限</el-menu-item>
                    <el-menu-item index="5-2">员工档案字段</el-menu-item>
                    <el-menu-item index="5-3">个人信息展示</el-menu-item>
                    <el-menu-item index="5-4">人事审批</el-menu-item>
                    <el-menu-item index="5-5">数据授权</el-menu-item>
                    <el-menu-item index="5-6">黑名单</el-menu-item>
                  </el-menu-item-group>
                </el-submenu>
                <el-submenu index="6">
                  <template slot="title">
                    <i class="el-icon-announcement"></i>
                    <span>公告</span>
                  </template>
                </el-submenu>
              </el-menu>
            </el-col>
          </el-row>
        </el-aside>
        <el-main style="background-color: white">
          <h1 style="float: left; text-align: center; line-height: 40px">
            员工花名册
          </h1>
          <el-button class="typebtn" type="text" icon="el-icon-setting"
            >自定义字段设置</el-button
          >
          <br />
          <el-button type="primary" style="float: right; margin-left: 10px"
            >导入花名册</el-button
          >
          <el-button @click="handleAdd" type="primary" style="float: right; background-color: white; color:#606266;"
            >添加员工</el-button
          >
          <br />
          <div class="container1">
            <div
              style="
                font-size: 18px;
                color: rgb(90, 90, 243);
                border-right: 1px solid rgb(189, 178, 178);
                width: 25%;
              "
            >
              在职员工 167
            </div>
            <div style="width: 15%">全职 151</div>
            <div style="width: 15%">兼职 4</div>
            <div style="width: 15%">实习 1</div>
            <div style="width: 15%">劳务派遣 1</div>
            <div style="width: 15%">无员工类型 10</div>
          </div>
          <div class="container2">
            <div style="width: 33%">试用 19</div>
            <div style="width: 33%">正式 140</div>
            <div style="width: 33%">待离职 8</div>
          </div>
          <br />
          <el-input
            placeholder="搜索员工"
            prefix-icon="el-icon-search"
            v-model="searchQuery"
            @keydown.enter.native="handleSearch()"
            style="width: 16%; float: left"
          >
          
          </el-input>

          <el-select
            v-model="value1"
            placeholder="选择部门"
            style="width: 15%; float: left; margin-left: 10px"
          >
            <el-option
              v-for="item in options1"
              :key="item.value1"
              :label="item.label1"
              :value="item.value1"
            >
            </el-option>
          </el-select>
          <div class="blockTime" style="float: left; margin-left: 10px">
            <el-date-picker
              v-model="dataTime"
              type="daterange"
              align="right"
              unlink-panels
              range-separator="至"
              start-placeholder="开始日期"
              end-placeholder="结束日期"
              :picker-options="pickerOptions"
            >
            </el-date-picker>
          </div>

          <el-button
            style="
              float: right;
              margin-left: 10px;
              margin-top: 10px;
              color: blue;
              border: 1px blue solid;
              width: 5%;
            "
            >导出</el-button
          >
          <el-button style="float: right; margin-top: 10px; width: 7%"
            >邀请认证</el-button
          >
          <el-table :data="paginatedData" style="width: 100%">
            <el-table-column prop="avatar" width="80">
              <template slot-scope="scope">
                <i class="el-icon-user-solid"></i>
                <span style="margin-left: 20px">{{ scope.row.date }}</span>
              </template>
            </el-table-column>
            <el-table-column prop="name" label="姓名" width="180">
            </el-table-column>
            <el-table-column prop="department" label="部门" width="200">
            </el-table-column>
            <el-table-column prop="position" label="职位" width="180">
            </el-table-column>
            <el-table-column prop="entryTime" label="入职时间" width="180">
            </el-table-column>
            <el-table-column prop="employeeType" label="员工类型" width="180">
            </el-table-column>
            <el-table-column prop="number" label="手机号" width="180">
            </el-table-column>
            <el-table-column label="操作" width="80">
              <template slot-scope="scope">
                <el-button
                  @click="handleEdit(scope.row)"
                  type="text"
                  size="small"
                  >编辑</el-button
                >
              </template>
            </el-table-column>
          </el-table>
          <el-dialog :title="dialogTitle" :visible.sync="editDialogVisible">
            <el-form :model="editForm" ref="form" label-width="80px">
              <el-form-item label="姓名:">
                <el-input v-model="editForm.name"></el-input>
              </el-form-item>
              <el-form-item label="部门:">
                <el-input v-model="editForm.department"></el-input>
              </el-form-item>
              <el-form-item label="职位:">
                <el-input v-model="editForm.position"></el-input>
              </el-form-item>
              <el-form-item label="入职时间:">
                <el-input v-model="editForm.entryTime"></el-input>
              </el-form-item>
              <el-form-item label="员工类型:">
                <el-input v-model="editForm.employeeType"></el-input>
              </el-form-item>
              <el-form-item label="手机号:">
                <el-input v-model="editForm.number"></el-input>
              </el-form-item>
            </el-form>
            <span slot="footer" class="dialog-footer">
              <el-button @click="editDialogVisible = false">取消</el-button>
              <el-button type="primary" @click="saveEdit">确定</el-button>
            </span>
          </el-dialog>

          <el-pagination
            @size-change="handleSizeChange"
            @current-change="handleCurrentChange"
            :current-page="currentPage"
            :page-sizes="[5, 10, 20, 40]"
            :page-size="pageSize"
            layout="total, sizes, prev, pager, next, jumper"
            :total="total"
          >
          </el-pagination>
        </el-main>
      </el-container>
    </div>
  </body>
  <script type="text/javascript">
    new Vue({
      el: "#app",
      data: function () {
        return {
          pickerOptions: {
            shortcuts: [
              {
                text: "最近一周",
                onClick(picker) {
                  const end = new Date();
                  const start = new Date();
                  start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);
                  picker.$emit("pick", [start, end]);
                },
              },
              {
                text: "最近一个月",
                onClick(picker) {
                  const end = new Date();
                  const start = new Date();
                  start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);
                  picker.$emit("pick", [start, end]);
                },
              },
              {
                text: "最近三个月",
                onClick(picker) {
                  const end = new Date();
                  const start = new Date();
                  start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);
                  picker.$emit("pick", [start, end]);
                },
              },
            ],
          },
          dataTime: "",

          options1: [
            {
              value1: "选项1",
              label1: "开发部",
            },
            {
              value1: "选项2",
              label1: "运维部",
            },
            {
              value1: "选项3",
              label1: "项目部",
            },
          ],
          value1: "",

          currentPage: 1,
          pageSize: 5,
          tableData: [
            {
              name: "王虎",
              department: "开发部",
              position: "前端开发",
              entryTime: "2016-05-02",
              employeeType: "全职",
              number: "18367895134",
            },
            {
              name: "小虎",
              department: "开发部",
              position: "前端开发",
              entryTime: "2016-05-02",
              employeeType: "全职",
              number: "18367895134",
            },
            {
              name: "王小虎",
              department: "开发部",
              position: "前端开发",
              entryTime: "2016-05-02",
              employeeType: "全职",
              number: "18367895134",
            },
            {
              name: "王五",
              department: "开发部",
              position: "前端开发",
              entryTime: "2016-05-02",
              employeeType: "全职",
              number: "18367895134",
            },
            {
              name: "大虎",
              department: "开发部",
              position: "前端开发",
              entryTime: "2016-05-02",
              employeeType: "全职",
              number: "18367895134",
            },
            {
              name: "张三",
              department: "开发部",
              position: "前端开发",
              entryTime: "2016-05-02",
              employeeType: "全职",
              number: "18367895134",
            },
            {
              name: "李四",
              department: "开发部",
              position: "前端开发",
              entryTime: "2016-05-02",
              employeeType: "全职",
              number: "18367895134",
            },
            {
              name: "赵六",
              department: "开发部",
              position: "前端开发",
              entryTime: "2016-05-02",
              employeeType: "全职",
              number: "18367895134",
            },
            {
              name: "李明",
              department: "开发部",
              position: "前端开发",
              entryTime: "2016-05-02",
              employeeType: "全职",
              number: "18367895134",
            },
          ],
          searchQuery: "",
          filteredData: [],
          total: 0,
          editDialogVisible: false,
          editForm: {
            name: "",
            department: "",
            position: "",
            entryTime: "",
            employeeType: "",
            number: "",
          },
          editIndex: null,
          isEditMode: false,
          dialogTitle: "",
        };
      },
      created() {
        this.filteredData = this.tableData;
        this.total = this.tableData.length;
        // this.handletableData();
      },
      computed: {
        paginatedData() {
          const start = (this.currentPage - 1) * this.pageSize;
          const end = start + this.pageSize;
          return this.filteredData.slice(start, end);
        },
      },
      mounted() {
        this.filteredData = this.tableData;
        this.updatePaginatedData();
      },
      methods: {
        handleOpen(key, keyPath) {
          console.log(key, keyPath);
        },
        handleClose(key, keyPath) {
          console.log(key, keyPath);
        },
        handleSizeChange(val) {
          this.pageSize = val;
          this.currentPage = 1;
          this.updatePaginatedData();
        },
        handleCurrentChange(val) {
          this.currentPage = val;
          this.updatePaginatedData();
        },
        handleSearch() {
          const searchQuery = this.searchQuery.toLowerCase();
          if (this.searchQuery) {
            this.filteredData = this.tableData.filter((item) =>
              item.name.toLowerCase().includes(searchQuery)
            );
          } else {
            this.filteredData = this.tableData;
          }
          this.total = this.filteredData.length;
          if (this.filteredData.length == 0) {
            this.$message({
              message: "没有找到相关内容！",
              type: "warning",
            });
          }

          this.currentPage = 1;
          this.updatePaginatedData();
        },
        updatePaginatedData() {
          const start = (this.currentPage - 1) * this.pageSize;
          const end = start + this.pageSize;
          this.paginatedData = this.filteredData.slice(start, end);
        },
        handleEdit(row) {
          this.isEditMode = true;
          this.dialogTitle = "详情";
          this.editForm = { ...row };
          this.editIndex = this.tableData.indexOf(row);
          this.editDialogVisible = true;
        },
        handleAdd() {
          this.isEditMode = false;
          this.dialogTitle = "添加";
          this.editForm = {
            name: "",
            department: "",
            position: "",
            entryTime: "",
            employeeType: "",
            number: "",
          };
          this.editDialogVisible = true;
        },
        saveEdit() {
          if (this.isEditMode) {
            if (this.editIndex !== null) {
              this.$set(this.tableData, this.editIndex, { ...this.editForm });
            }
          } else {
            this.tableData.push({ ...this.editForm });
          }
          this.editDialogVisible = false;
        },

        // handletableData() {
        //   this.$http.get("http://localhost:8080/tableData").then((res) => {
        //     this.tableData = res.body;
        //   });
        // },
      },
    });
  </script>
</html>
